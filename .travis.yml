language: node_js
node_js:
  - 0.11
  - 0.10

addons:
  code_climate:
    repo_token:
      secure: "RSR2IpuuygM0IkHpQ8fPLieIbnvWulsz6c2PQ7HQzYJocYM9ACCTqrSjvQK8udldEn4RGw/3IgLtIPDQ66mRah4nNzuOJ2IVoH7Zo1c2L2cQ34uQdfHBfbiYTSqlz0mUtGQdLml1KzcftFr0z+kcg2uUOaacFHn7AtdlcDcpOHU="

deploy:
  provider: npm
  email: me@samcday.com.au
  api_key:
    secure: N1pXQfcwpMcOexiCDBRXYfQ3WbJP+9RNZZbayb1iNFuhEm50/HxJLdUcV8UInxKkUuS5lSIsWX1KbPKEEtbo6IR5wLTpVUzfYblVmYQI6yoI1XjhcBdYVdlS1uKZUD5ACEfV3Ut112G70XcWks3Drf7/zAuAdvlR3A1mT4E96jQ=
  on:
    tags: true
    all_branches: true
    node_js: 0.10

after_success:
  - "npm run coverage-report"
  - "npm install -g codeclimate-test-reporter"
  - "cat coverage/combined/lcov.info | codeclimate"

env:
  - npm_config_coverage="1"
